!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);var r={url:"https://praktikum.tk/cohort11/",headers:{authorization:"93e15dca-48c4-4218-b7e5-3b54e31d24c7","Content-Type":"application/json"}};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url,this.headers=e.headers,this.errorMessages={getUserInfo:"Произошла ошибка при получении данных пользователя.",updateUserInfo:"Произошла ошибка при обновлении данных пользователя.",setAvatar:"Произошла ошибка при обновлении аватарки пользователя.",getCards:"Произошла ошибка при загрузке карточек.",addCard:"Произошла ошибка при добавлении карточки.",deleteCard:"Произошла ошибка при удалении карточки.",addLike:'Произошла ошибка при добавлении "Like".',removeLike:'Произошла ошибка при удалении "Like".'}}var e,n,r;return e=t,(n=[{key:"promiseProcessing",value:function(t,e){return t.ok?t.json():Promise.reject("".concat(this.errorMessages[e]," Ошибка: ").concat(t.status))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this.url,"users/me/"),{headers:this.headers}).then((function(e){return t.promiseProcessing(e,"getUserInfo")}))}},{key:"updateUserInfo",value:function(t,e){var n=this;return fetch("".concat(this.url,"users/me/"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:e})}).then((function(t){return n.promiseProcessing(t,"updateUserInfo")}))}},{key:"setAvatar",value:function(t){var e=this;return fetch("".concat(this.url,"users/me/avatar/"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((function(t){return e.promiseProcessing(t,"setAvatar")}))}},{key:"getCards",value:function(){var t=this;return fetch("".concat(this.url,"cards/"),{headers:this.headers}).then((function(e){return t.promiseProcessing(e,"getCards")}))}},{key:"addCard",value:function(t,e){var n=this;return fetch("".concat(this.url,"cards/"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:e})}).then((function(t){return n.promiseProcessing(t,"addCard")}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this.url,"cards/").concat(t),{method:"DELETE",headers:this.headers}).then((function(t){return e.promiseProcessing(t,"deleteCard")}))}},{key:"addLike",value:function(t){var e=this;return fetch("".concat(this.url,"cards/like/").concat(t),{method:"PUT",headers:this.headers}).then((function(t){return e.promiseProcessing(t,"addLike")}))}},{key:"removeLike",value:function(t){var e=this;return fetch("".concat(this.url,"cards/like/").concat(t),{method:"DELETE",headers:this.headers}).then((function(t){return e.promiseProcessing(t,"removeLike")}))}}])&&o(e.prototype,n),r&&o(e,r),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.popupName=e,this.closeButton=n,this.container=r}var e,n,r;return e=t,(n=[{key:"open",value:function(t){this.popupName.querySelector(".popup__image").src=t,this.popupName.classList.add("popup_is-opened")}},{key:"close",value:function(){this.popupName.classList.remove("popup_is-opened")}},{key:"setEventListeners",value:function(){var t=this;this.closeButton.addEventListener("click",(function(){return t.close()})),this.container.addEventListener("keydown",(function(e){27===e.keyCode&&t.popupName.closest(".popup_is-opened")&&t.close()}))}}])&&u(e.prototype,n),r&&u(e,r),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=e,this.name=n,this.about=r}var e,n,r;return e=t,(n=[{key:"setUserInfo",value:function(t,e){this.form.elements.name.value=t.textContent,this.form.elements.about.value=e.textContent}},{key:"updateUserInfo",value:function(){this.name.textContent=this.form.elements.name.value,this.about.textContent=this.form.elements.about.value}}])&&c(e.prototype,n),r&&c(e,r),t}();function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.popupName=e,this.openButton=n,this.submitButton=this.popupName.querySelector(".button"),this.closeButton=this.popupName.querySelector(".popup__close")}var e,n,r;return e=t,(n=[{key:"open",value:function(){this.popupName.classList.add("popup_is-opened")}},{key:"close",value:function(){this.popupName.classList.remove("popup_is-opened")}}])&&l(e.prototype,n),r&&l(e,r),t}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,t);var e,n,r,o=m(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).api=n,r.form=r.popupName.querySelector(".popup__form"),r}return e=i,(n=[{key:"updateAvatar",value:function(t){t.preventDefault(),this.openButton.style.backgroundImage="url(".concat(this.form.elements.link.value,")")}},{key:"setEventListeners",value:function(){var t=this;this.openButton.addEventListener("click",(function(){t.submitButton.textContent="Сохранить"})),this.form.addEventListener("submit",(function(e){e.preventDefault(),t.openButton.style.backgroundImage.slice(5,-2)===t.form.elements.link.value?y(b(i.prototype),"close",t).call(t):(t.submitButton.textContent="Загрузка...",t.api.setAvatar(t.form.elements.link.value).then((function(){t.updateAvatar(e),y(b(i.prototype),"close",t).call(t)})).catch((function(e){t.submitButton.textContent="Не удалось сохранить...",console.log(e)})).finally((function(){setTimeout((function(){t.submitButton.textContent="Сохранить"}),2e3)})))}))}}])&&d(e.prototype,n),r&&d(e,r),i}(f);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=E(t);if(e){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(i,t);var e,n,r,o=S(i);function i(t,e,n,r){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,t,e)).userInfo=n,u.api=r,u}return e=i,(n=[{key:"setEventListeners",value:function(){var t=this;this.openButton.addEventListener("click",(function(){t.userInfo.setUserInfo(t.userInfo.name,t.userInfo.about),t.submitButton.textContent="Сохранить"})),this.userInfo.form.addEventListener("submit",(function(e){e.preventDefault(),t.userInfo.form.elements.name.value===t.userInfo.name.textContent&&t.userInfo.form.elements.about.value===t.userInfo.about.textContent?w(E(i.prototype),"close",t).call(t):(t.submitButton.textContent="Загрузка...",t.api.updateUserInfo(t.userInfo.form.elements.name.value,t.userInfo.form.elements.about.value).then((function(){t.userInfo.updateUserInfo(),w(E(i.prototype),"close",t).call(t)})).catch((function(e){t.submitButton.textContent="Не удалось сохранить...",console.log(e)})).finally((function(){setTimeout((function(){t.submitButton.textContent="Сохранить"}),2e3)})))}))}}])&&k(e.prototype,n),r&&k(e,r),i}(f);function j(t){return function(t){if(Array.isArray(t))return t}(t)||x(t)||P(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t){return function(t){if(Array.isArray(t))return B(t)}(t)||x(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}function x(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var A=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.popup=e,this.container=n,this.form=this.popup.popupName.querySelector(".popup__form"),this.button=this.form.querySelector(".button")}var e,n,r;return e=t,(n=[{key:"checkInputValidity",value:function(t){return t.setCustomValidity(""),t.validity.valueMissing?(t.setCustomValidity("Это обязательное поле"),!1):t.validity.tooShort||t.validity.tooLong?(t.setCustomValidity("Должно быть от 2 до 30 символов"),!1):t.validity.patternMismatch?(t.setCustomValidity("Здесь должна быть ссылка"),!1):t.checkValidity()}},{key:"isFieldValid",value:function(t){var e=this.form.querySelector('.error[data-for="'.concat(t.name,'"]')),n=this.checkInputValidity(t);return e.textContent=t.validationMessage,n}},{key:"setSubmitButtonState",value:function(t,e){e?(t.removeAttribute("disabled"),t.classList.add("popup__button_valid"),t.classList.remove("popup__button_invalid")):(t.setAttribute("disabled",!0),t.classList.add("popup__button_invalid"),t.classList.remove("popup__button_valid"))}},{key:"resetValidityForms",value:function(t){I(t.elements).forEach((function(t){"submit"!==t.type&&"button"!==t.type&&t.setCustomValidity("")}))}},{key:"clearValidateMessage",value:function(){this.container.querySelectorAll(".error").forEach((function(t){return t.textContent=""}))}},{key:"setEventListeners",value:function(){var t=this;this.popup.openButton.addEventListener("click",(function(){t.resetValidityForms(t.form),t.clearValidateMessage(),(t.popup.popupName.closest("#popup-place")||t.popup.popupName.closest("#popup-avatar"))&&(t.form.reset(),t.setSubmitButtonState(t.button,!1)),t.popup.open(),t.popup.popupName.closest("#popup-profile")&&t.setSubmitButtonState(t.button,!0)})),this.popup.closeButton.addEventListener("click",(function(){return t.popup.close()})),this.container.addEventListener("keydown",(function(e){27===e.keyCode&&t.popup.popupName.closest(".popup_is-opened")&&t.popup.close()})),this.form.addEventListener("input",(function(){var e=j(t.form.elements).slice(0);t.isFieldValid(event.target),e.reduce((function(e,n){return t.checkInputValidity(n)&&e}),!0)?t.setSubmitButtonState(t.button,!0):t.setSubmitButtonState(t.button,!1)}))}}])&&R(e.prototype,n),r&&R(e,r),t}();function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.objects=e}var e,n,r;return e=t,(n=[{key:"setEventListenersOnObjects",value:function(){this.objects.forEach((function(t){return t.setEventListeners()}))}}])&&T(e.prototype,n),r&&T(e,r),t}();function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.data=n,this.createCards=r}var e,n,r;return e=t,(n=[{key:"addCard",value:function(t){this.container.appendChild(t)}},{key:"render",value:function(){var t=this;this.data.forEach((function(e){return t.addCard(t.createCards(e.name,e.link,e.cardId,e.likes,e.ownerId).create())}))}}])&&N(e.prototype,n),r&&N(e,r),t}();function U(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw i}}}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var z=function(){function t(e,n,r,o,i,u,a,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.link=n,this.cardId=r,this.likes=o,this.ownerId=i,this.zoomImage=u,this.userId=a,this.api=c}var e,n,r;return e=t,(n=[{key:"create",value:function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("button"),r=document.createElement("div"),o=document.createElement("h3"),i=document.createElement("div"),u=document.createElement("button"),a=document.createElement("span");t.classList.add("place-card"),t.setAttribute("data-id","".concat(this.cardId)),e.classList.add("place-card__image"),e.style.backgroundImage="url(".concat(this.link,")"),n.classList.add("place-card__delete-icon"),r.classList.add("place-card__description"),o.classList.add("place-card__name"),o.textContent=this.name,i.classList.add("place-card__like-container"),u.classList.add("place-card__like-icon"),a.classList.add("place-card__like-counter"),a.textContent="".concat(this.likes.length),e.appendChild(n),r.appendChild(o),r.appendChild(i),i.appendChild(u),i.appendChild(a),t.appendChild(e),t.appendChild(r),this.cardElement=t,this.likeButton=u,this.likeCounter=a,this.removeButton=n,this.imageElement=e,this.setEventListeners(),this.ownerId===this.userId&&this.removeButton.classList.add("place-card__delete-icon_visible");var c,s=U(this.likes);try{for(s.s();!(c=s.n()).done;)c.value._id===this.userId&&this.likeButton.classList.add("place-card__like-icon_liked")}catch(t){s.e(t)}finally{s.f()}return t}},{key:"like",value:function(){this.likeButton.classList.toggle("place-card__like-icon_liked")}},{key:"remove",value:function(){this.cardElement.remove()}},{key:"zoom",value:function(){this.zoomImage.open(this.imageElement.style.backgroundImage.slice(5,-2))}},{key:"setEventListeners",value:function(){var t=this;this.likeButton.addEventListener("click",(function(e){e.target.closest(".place-card__like-icon_liked")?t.api.removeLike(t.cardId).then((function(e){t.like(),t.likeCounter.textContent=e.likes.length})).catch((function(t){return console.log(t)})):t.api.addLike(t.cardId).then((function(e){t.like(),t.likeCounter.textContent=e.likes.length})).catch((function(t){return console.log(t)}))})),this.removeButton.addEventListener("click",(function(){window.confirm("Вы действительно хотите удалить эту карточку?")&&t.api.deleteCard(t.cardId).then((function(){return t.remove()})).catch((function(t){return console.log(t)}))})),this.imageElement.addEventListener("click",(function(e){e.target===t.imageElement&&e.target!==t.removeButton&&t.zoom()}))}}])&&M(e.prototype,n),r&&M(e,r),t}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Q(t);if(e){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W,X,Y,Z,tt,et,nt,rt,ot,it,ut,at,ct,st,lt,ft,pt,dt,yt,ht,mt,vt,bt,gt,_t,kt,wt,Ct,St,Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(i,t);var e,n,r,o=G(i);function i(t,e,n,r){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,t,e)).cardList=n,u.api=r,u.form=u.popupName.querySelector(".popup__form"),u}return e=i,(n=[{key:"setEventListeners",value:function(){var t=this;this.openButton.addEventListener("click",(function(){t.submitButton.classList.remove("popup__button_loading"),t.submitButton.textContent="+"})),this.form.addEventListener("submit",(function(e){e.preventDefault(),t.submitButton.classList.add("popup__button_loading"),t.submitButton.textContent="Загрузка...",t.api.addCard(t.form.elements.place.value,t.form.elements.link.value).then((function(e){t.cardList.addCard(t.cardList.createCards(t.form.elements.place.value,t.form.elements.link.value,e._id,e.likes,e.owner._id).create()),H(Q(i.prototype),"close",t).call(t)})).catch((function(e){t.submitButton.textContent="Не удалось сохранить...",console.log(e)})).finally((function(){setTimeout((function(){t.submitButton.classList.remove("popup__button_loading"),t.submitButton.textContent="+"}),2e3)}))}))}}])&&J(e.prototype,n),r&&J(e,r),i}(f);function Et(t,e,n){return(Et=Lt()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&jt(o,n.prototype),o}).apply(null,arguments)}function Lt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}W=document.querySelector(".root"),X=W.querySelector(".profile"),Y=W.querySelector(".spinner"),Z=W.querySelector(".places-list"),tt=X.querySelector(".user-info__photo"),et=X.querySelector(".user-info__button-edit"),nt=X.querySelector(".user-info__button"),rt=X.querySelector(".user-info"),ot=X.querySelector(".user-info__name"),it=X.querySelector(".user-info__job"),ut=X.querySelector(".user-info__photo"),at=W.querySelector("#popup-avatar"),ct=W.querySelector("#popup-profile"),st=W.querySelector("#popup-place"),lt=W.querySelector("#popup-image"),ft=lt.querySelector(".popup__close"),pt=document.forms.edit,dt=new i(r),yt=new a(lt,ft,document),ht=new s(pt,ot,it),mt=new f(at,tt),vt=new f(ct,et),bt=new f(st,nt),gt=new g(at,tt,dt),_t=new L(ct,et,ht,dt),kt=new A(mt,document),wt=new A(vt,W),Ct=new A(bt,W),St=new q([gt,yt,_t,kt,wt,Ct]),Y.classList.add("spinner_visible"),dt.getUserInfo().then((function(t){ot.textContent=t.name,it.textContent=t.about,ut.style.backgroundImage="url(".concat(t.avatar),rt.setAttribute("data-id",t._id),et.classList.add("user-info__button-edit_visible"),ut.classList.remove("user-info__photo_error")})).catch((function(t){ot.textContent="Не удалось загрузить данные...",it.textContent="Попробуте обновить страницу",ut.classList.add("user-info__photo_error"),console.log(t)})),dt.getCards().then((function(t){nt.classList.add("user-info__button_visible");var e=rt.getAttribute("data-id"),n=new D(Z,t.map((function(t){return{name:t.name,link:t.link,cardId:t._id,likes:t.likes,ownerId:t.owner._id}})),(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Et(z,n.concat([yt,e,dt]))})),r=new Ot(st,nt,n,dt);n.render(),r.setEventListeners()})).catch((function(t){console.log(t)})).finally((function(){Y.classList.remove("spinner_visible")})),St.setEventListenersOnObjects()}]);